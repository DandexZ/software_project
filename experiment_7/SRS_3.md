### 3.1 所需的状态和方式
- **运行状态**：
  - **活动状态**：系统正常运行时，用户可进行信息查询、修改等操作。
  - **维护状态**：管理员进行数据库维护或系统更新时，普通用户无法访问。
- **运行方式**：所有功能在同一GUI界面下运行，无需区分多模式。

### 3.2 需求概述
#### 3.2.1 目标
- **开发意图**：开发简化版虚拟校园卡管理系统，专注基础信息管理功能。
- **主要功能**：
  - 用户信息管理（增删改查）
  - 基础信息展示
  - 简单权限管理
- **处理流程**：`用户请求 → 业务逻辑层 → 数据访问层 → SQLite数据库`
- **高层次系统图**：
  ```plaintext
  [QT用户界面] ←→ [C++业务逻辑] ←→ [SQLite数据库]
  ```

#### 3.2.2 运行环境
- **硬件**：x86架构PC（Intel i5/8GB RAM/500MB存储）
- **软件**：
  - Windows 10+/Ubuntu 20.04 LTS
  - Qt 5.15+框架
  - SQLite 3.35+

#### 3.2.3 用户特点
| 用户类型   | 技能要求                     | 操作范围               |
|------------|------------------------------|------------------------|
| 管理员     | SQLite基础命令、QT界面操作   | 全功能CRUD及系统维护   |
| 普通用户   | 基础计算机操作               | 个人信息查询与修改     |

#### 3.2.4 关键点
- 数据库单表设计（≤500条记录）
- Qt界面响应时间≤1秒
- 学号唯一性约束（8位数字）

#### 3.2.5 约束条件
- **开发周期**：2个月（原型1周+核心功能4周+测试3周）
- **技术栈**：C++17/Qt 5/SQLite3
- **预算**：零成本（使用开源工具）

### 3.3 需求规格
#### 3.3.1 功能结构
[校园卡管理系统] 
|-->[用户管理模块]
|-->[信息展示模块]
|-->[系统管理模块]


#### 3.3.3 描述约定
- **时间格式**：24小时制（HH:MM:SS）
- **金额单位**：人民币元（保留2位小数）
- **ID规范**：8位数字学号（正则：`^[0-9]{8}$`）

### 3.4 CSCI能力需求
#### 3.4.1 用户管理
| 要素       | 说明                                                                 |
|------------|----------------------------------------------------------------------|
| 输入       | 学号（8数字）、姓名（2-10汉字）、密码（SHA-256加密）                 |
| 处理       | 格式校验 → 数据库事务操作 → 错误回滚                                 |
| 输出       | JSON格式操作结果（含成功状态/错误码）                                |

#### 3.4.2 信息展示
- **查询性能**：单条记录检索时间≤100ms
- **输出格式**：
  ```json
  {
    "student_id": "20250001",
    "name": "张三",
    "balance": 150.00
  }
  ```

### 3.5 外部接口需求
- **用户接口**：Qt Widgets界面（兼容Windows/Linux）
- **软件接口**：SQLite3 C/C++ Interface

### 3.6 CSCI内部接口需求  
无特殊要求，留待设计时决定。

### 3.7 CSCI内部数据需求  
需要存储：  
- 用户表（ID、姓名、状态等）  
- 操作日志表  

### 3.8 适应性需求  
本系统无需特殊的安装适应性需求，所有功能均通过标准程序界面实现。系统设计时应考虑以下适应性：  
- 支持不同屏幕分辨率的显示适配  
- 支持主流操作系统（Windows 10/11，macOS最新版本）  
- 数据库连接参数可通过配置文件修改  

### 3.9 保密性需求  
由于是学生课业项目，保密性需求简化如下：  
- 用户密码需加密存储（如使用MD5或SHA-256哈希）  
- 管理员账号需设置复杂度要求（至少8位，包含字母和数字）  
- 普通用户只能查看和修改自己的信息  

### 3.10 保密性和私密性需求  
- 系统不存储真实敏感信息（如身份证号、银行卡号等）  
- 所有用户数据仅用于教学演示目的  
- 不要求实现审计日志功能  

### 3.11 CSCI环境需求  
系统运行环境要求：  
- 操作系统：Windows 10/11或macOS 10.15+  
- Cpp环境：gcc11或更高版本  
- 数据库：SQLite 5.7或更高版本  
- 内存：最低4GB RAM  
- 存储空间：至少500MB可用空间  

### 3.12 计算机资源需求  
#### 3.12.1 计算机硬件需求  
- 处理器：Intel i5或同等性能处理器  
- 内存：建议8GB RAM  
- 硬盘：SSD存储设备  
- 显示器：支持1024×768以上分辨率  

#### 3.12.2 计算机硬件资源利用需求  
- CPU利用率：峰值不超过70%  
- 内存占用：不超过2GB  
- 存储空间：数据库不超过100MB  

#### 3.12.3 计算机软件需求  
- 开发工具：Qt  
- 数据库管理工具：DB Browser  
- 版本控制：Git  

#### 3.12.4 计算机通信需求  
- 本地网络连接（用于数据库访问）  
- 不要求远程访问功能  
- 无特殊通信协议要求  

### 3.13 软件质量因素
| 质量属性   | 量化指标                          | 实现方案                      |
|------------|-----------------------------------|-------------------------------|
| 可靠性     | 数据操作成功率≥99.9%              | SQLite事务+WAL日志            |
| 可维护性   | 代码注释率≥30%                   | Doxygen文档规范               |
| 可测试性   | 单元测试覆盖率≥80%               | Google Test框架               |

### 3.14 设计和实现的约束  
- **架构约束**：  
  - 使用单机部署的SQLite数据库，禁止依赖网络服务。  
  - 采用QT框架实现GUI，禁止引入其他图形库（如GTK）。  
- **标准与规范**：  
  - 密码存储需使用SHA-256加密，符合《中华人民共和国网络安全法》要求。  
  - 代码风格遵循Google C++ Style Guide，缩进统一为4空格。  
- **灵活性要求**：  
  - 数据库表结构需预留扩展字段（如`reserved_field1`），以应对未来新增需求。  
  - 禁止硬编码学号规则，需通过配置文件支持不同院校的学号格式。 

### 3.15 数据  
- **输入数据**：  
  - 用户信息：学号（唯一键）、姓名、密码（加密）、邮箱等，单条记录≤1KB。  
  - 操作日志：时间戳、操作类型、执行人，单条记录≤500B。  
- **输出数据**：  
  - 用户端：个人信息页面（≤5KB）、消费记录列表（每页≤10条）。  
  - 管理端：查询结果表格（支持分页，每页≤20条）。  
- **数据管理**：  
  - SQLite数据库文件大小限制为≤10MB，支持手动备份/恢复（通过脚本）。  

### 3.16 操作  
- **常规操作**：用户登录、信息查询、管理员批量导入数据（CSV格式）。  
- **特殊操作**：数据库紧急备份（通过命令行工具`db_backup.sh`）。  
- **初始化操作**：首次运行时自动创建数据库表结构（执行`init_db.sql`）。  
- **恢复操作**：提供数据回滚功能（基于备份文件，恢复至最近3天的状态）。 

### 3.17 故障处理  
- **软件故障**：  
  - 错误信息：数据库连接失败时提示“系统繁忙，请稍后重试（错误代码：DB_001）”。  
  - 补救措施：自动重试3次后降级为本地缓存模式（仅限查询功能）。  
- **硬件故障**：  
  - PC断电时，通过SQLite的WAL模式保障数据完整性。  
  - 读卡器异常时，提示“设备未连接，请检查硬件（错误代码：HW_002）”。  

### 3.18 算法说明  
- **登录认证算法**：  
  - 概况：SHA-256哈希比对（用户输入密码→加密→与数据库存储值匹配）。  
  - 公式：`stored_hash = SHA256(salt + user_input)`，其中`salt`为随机8字节。  
- **数据筛选算法**：  
  - 概况：管理员端按学号前缀快速检索（B树索引优化）。  
  - 公式：`WHERE student_id LIKE '2025%' LIMIT 20`。 

### 3.19 有关人员需求  
- **用户**：500名师生，需基础计算机操作能力（如使用浏览器/输入文本）。  
- **管理员**：1-2人，需掌握SQLite基础命令（如`.dump`备份）。  
- **开发团队**：5名学生，需C++/QT培训10小时，Git协作规范。  

---  
### 3.20 有关培训需求  
- **用户培训**：提供5分钟演示视频（覆盖登录、查询、修改密码）。  
- **管理员培训**：包含在系统文档中，重点讲解日志审计与数据备份。  

---  
### 3.21 有关后勤需求  
- **维护**：每月检查数据库文件完整性（通过`sqlite3_check`工具）。  
- **运输**：系统通过GitHub分发，无需物理介质。  

---  
### 3.22 其他需求  
- **隐私保护**：禁止记录用户操作行为（如按键日志），符合《个人信息保护法》。  
- **兼容性**：支持Windows 10+和Ubuntu 20.04 LTS。  

---  
### 3.23 包装需求  
- 交付物为ZIP压缩包，内含：可执行文件（`CCMS.exe`）、数据库文件（`ccms.db`）、用户手册（`README.pdf`）。  
- 文件命名规范：`SOFT_PROJ-2025-CCMS-001_v1.0.0_YYYYMMDD.zip`。  

---  
### 3.24 需求的优先次序和关键程度  
- **关键需求**（P0）：用户登录、学号唯一性、数据加密。  
- **高优先级**（P1）：管理端CRUD、操作日志。  
- **普通需求**（P2）：界面美化、多语言支持。