## 7. 架构决策

### 7.1 技术选型决策

- B/S架构：采用浏览器/服务器模式，支持PC浏览器、移动端和自助终端多平台访问，降低客户端维护成本，提升用户体验。
- 微服务架构：基于Spring Cloud实现服务拆分，将系统划分为用户服务、支付服务、门禁服务等独立模块，提高系统的可扩展性和可维护性。
- MySQL数据库：选用关系型数据库MySQL 8.0作为核心数据存储，通过ACID事务机制保障交易数据的一致性和完整性。
 
### 7.2 安全决策

- 实施用户认证和授权机制，确保系统安全:采用账号+密码作为基础凭证，密码经SHA-256加盐哈希处理（盐值长度16字节）后存储于SQLite用户表。
- 密码策略强制要求：最小长度8位，包含字母/数字/特殊字符，90天强制更换周期,输入密码格式不对会通过mainwindow.ui实现的关于<messagebox>的部分来显示警告。
- 对敏感数据进行加密存储和传输，防止数据泄露:数据库文件采用SQLite加密扩展（SEE），防止物理设备丢失导致数据泄露。

### 7.3 性能决策

- 采用缓存技术，提高系统响应速度:支持将高频用户信息（最近访问的20个用户完整档案）,静态数据（院系列表、商户目录等）,权限规则（角色-操作映射表）存放在缓存中。
- 实施负载均衡，确保系统在高并发情况下的稳定性。

## 8. 架构原理

### 8.1 设计原则
- 单一职责原则：每个微服务仅负责单一业务域（如支付服务专注交易处理，门禁服务独立管理通行逻辑）。
- 开闭原则：通过抽象支付接口(IPaymentGateway)，支持新增支付渠道（微信/支付宝）无需修改核心代码。
- 依赖倒置原则：服务间调用依赖API网关提供的RESTful接口契约，而非具体实现类。
- 最终一致性：跨服务事务（如消费扣款）采用用户-管理员双向通知模式，实现数据最终一致。

### 8.2 设计模式
- 采用接近于观察者模式的设计模式:实时通知系统（余额变动、消费提醒等）
